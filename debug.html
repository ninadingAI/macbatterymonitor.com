<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="google-adsense-account" content="ca-pub-2461181061896196">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2461181061896196"
     crossorigin="anonymous"></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-F5NN8168X6"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-F5NN8168X6');
    </script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Language Switcher Debug</title>
    <style>
        body { 
            padding: 50px; 
            font-family: Arial, sans-serif; 
            background: #f5f5f7;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .lang-switcher {
            position: relative;
            display: inline-block;
        }
        button { 
            padding: 12px 20px; 
            background: #f5f5f7; 
            color: #1d1d1f; 
            border: none; 
            border-radius: 20px; 
            cursor: pointer; 
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        button:hover {
            background: #e8e8ed;
        }
        .menu { 
            position: absolute; 
            top: 100%;
            right: 0;
            background: white; 
            border: 1px solid #d2d2d7; 
            border-radius: 8px;
            padding: 8px 0;
            margin-top: 8px; 
            min-width: 160px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 50;
        }
        .menu a { 
            display: block; 
            padding: 8px 16px; 
            text-decoration: none; 
            color: #1d1d1f; 
            font-size: 14px;
        }
        .menu a:hover { 
            background: #f5f5f7; 
        }
        .menu a.current {
            color: #0071e3;
            font-weight: 500;
        }
        .hidden { 
            display: none; 
        }
        .log {
            margin-top: 30px;
            padding: 20px;
            background: #f5f5f7;
            border-radius: 8px;
            font-family: monospace;
            font-size: 12px;
            white-space: pre-line;
            max-height: 200px;
            overflow-y: auto;
        }
        .error {
            color: #ff3b30;
        }
        .success {
            color: #30d158;
        }
        .info {
            color: #0071e3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ”§ Language Switcher Debug Tool</h1>
        <p>This tool helps diagnose language switcher issues.</p>
        
        <div class="lang-switcher">
            <button id="langButton">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"></path>
                </svg>
                English ðŸ‡ºðŸ‡¸
                <svg width="12" height="12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
            </button>
            <div id="langMenu" class="menu hidden">
                <a href="index.html" class="current">ðŸ‡ºðŸ‡¸ English</a>
                <a href="index_zh.html">ðŸ‡¨ðŸ‡³ ä¸­æ–‡</a>
                <a href="index_fr.html">ðŸ‡¨ðŸ‡¦ FranÃ§ais</a>
            </div>
        </div>
        
        <div class="log" id="log">Initializing debug tool...</div>
    </div>
    
    <script>
        const log = document.getElementById('log');
        
        function addLog(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const className = type === 'error' ? 'error' : type === 'success' ? 'success' : 'info';
            log.innerHTML += `<span class="${className}">[${timestamp}] ${message}</span>\n`;
            log.scrollTop = log.scrollHeight;
        }
        
        // Test basic functionality
        addLog('Page loaded, starting debug...', 'info');
        
        document.addEventListener('DOMContentLoaded', function() {
            addLog('DOM loaded successfully', 'success');
            
            const btn = document.getElementById('langButton');
            const menu = document.getElementById('langMenu');
            
            addLog(`Button element: ${btn ? 'Found âœ“' : 'NOT FOUND âœ—'}`, btn ? 'success' : 'error');
            addLog(`Menu element: ${menu ? 'Found âœ“' : 'NOT FOUND âœ—'}`, menu ? 'success' : 'error');
            
            if (btn && menu) {
                // Test click event
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    addLog('Button clicked!', 'success');
                    
                    const isHidden = menu.classList.contains('hidden');
                    menu.classList.toggle('hidden');
                    
                    addLog(`Menu was ${isHidden ? 'hidden' : 'visible'}, now ${isHidden ? 'visible' : 'hidden'}`, 'success');
                });
                
                // Test outside click
                document.addEventListener('click', function(e) {
                    if (!btn.contains(e.target) && !menu.contains(e.target)) {
                        if (!menu.classList.contains('hidden')) {
                            menu.classList.add('hidden');
                            addLog('Clicked outside - menu closed', 'info');
                        }
                    }
                });
                
                addLog('Event listeners attached successfully!', 'success');
                addLog('Try clicking the language button above', 'info');
            } else {
                addLog('Cannot attach event listeners - missing elements', 'error');
            }
        });
        
        // Catch any JavaScript errors
        window.addEventListener('error', function(e) {
            addLog(`JavaScript Error: ${e.message} at ${e.filename}:${e.lineno}`, 'error');
        });
    </script>
</body>
</html>

